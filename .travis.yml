language: node_js

node_js:
  - "10"

services:
  - docker

stages:
  - test
  - name: deploy
  if: branch = master

jobs:
  - stage: test
    script: docker build -t client:latest ./Dockerfile.dev
  - stage: deploy
      script:
      - docker build -t client:latest .
      - docker ps -a
      - docker run --env AWS_ACCESS_KEY_ID=$AWS_KEY --env AWS_SECRET_ACCESS_KEY=$AWS_SECRET --env AWS_DEFAULT_REGION=$AWS_REGION client

install: skip
